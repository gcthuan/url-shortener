define(["./core","./var/document","./var/documentElement","./var/rnotwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(e,t,n,i,r,o){"use strict";function a(){return!0}function s(){return!1}function l(){try{return t.activeElement}catch(e){}}function d(t,n,i,r,o,a){var l,u;if("object"==typeof n){"string"!=typeof i&&(r=r||i,i=void 0);for(u in n)d(t,u,i,r,n[u],a);return t}if(null==r&&null==o?(o=i,r=i=void 0):null==o&&("string"==typeof i?(o=r,r=void 0):(o=r,r=i,i=void 0)),o===!1)o=s;else if(!o)return t;return 1===a&&(l=o,o=function(t){return e().off(t),l.apply(this,arguments)},o.guid=l.guid||(l.guid=e.guid++)),t.each(function(){e.event.add(this,n,o,r,i)})}var u=/^key/,c=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,p=/^([^.]*)(?:\.(.+)|)/;return e.event={global:{},add:function(t,r,a,s,l){var d,u,c,h,v,f,g,m,y,b,E,T=o.get(t);if(T)for(a.handler&&(d=a,a=d.handler,l=d.selector),l&&e.find.matchesSelector(n,l),a.guid||(a.guid=e.guid++),(h=T.events)||(h=T.events={}),(u=T.handle)||(u=T.handle=function(n){return"undefined"!=typeof e&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):void 0}),r=(r||"").match(i)||[""],v=r.length;v--;)c=p.exec(r[v])||[],y=E=c[1],b=(c[2]||"").split(".").sort(),y&&(g=e.event.special[y]||{},y=(l?g.delegateType:g.bindType)||y,g=e.event.special[y]||{},f=e.extend({type:y,origType:E,data:s,handler:a,guid:a.guid,selector:l,needsContext:l&&e.expr.match.needsContext.test(l),namespace:b.join(".")},d),(m=h[y])||(m=h[y]=[],m.delegateCount=0,g.setup&&g.setup.call(t,s,b,u)!==!1||t.addEventListener&&t.addEventListener(y,u)),g.add&&(g.add.call(t,f),f.handler.guid||(f.handler.guid=a.guid)),l?m.splice(m.delegateCount++,0,f):m.push(f),e.event.global[y]=!0)},remove:function(t,n,r,a,s){var l,d,u,c,h,v,f,g,m,y,b,E=o.hasData(t)&&o.get(t);if(E&&(c=E.events)){for(n=(n||"").match(i)||[""],h=n.length;h--;)if(u=p.exec(n[h])||[],m=b=u[1],y=(u[2]||"").split(".").sort(),m){for(f=e.event.special[m]||{},m=(a?f.delegateType:f.bindType)||m,g=c[m]||[],u=u[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),d=l=g.length;l--;)v=g[l],!s&&b!==v.origType||r&&r.guid!==v.guid||u&&!u.test(v.namespace)||a&&a!==v.selector&&("**"!==a||!v.selector)||(g.splice(l,1),v.selector&&g.delegateCount--,f.remove&&f.remove.call(t,v));d&&!g.length&&(f.teardown&&f.teardown.call(t,y,E.handle)!==!1||e.removeEvent(t,m,E.handle),delete c[m])}else for(m in c)e.event.remove(t,m+n[h],r,a,!0);e.isEmptyObject(c)&&o.remove(t,"handle events")}},dispatch:function(t){var n,i,r,a,s,l,d=e.event.fix(t),u=new Array(arguments.length),c=(o.get(this,"events")||{})[d.type]||[],p=e.event.special[d.type]||{};for(u[0]=d,n=1;n<arguments.length;n++)u[n]=arguments[n];if(d.delegateTarget=this,!p.preDispatch||p.preDispatch.call(this,d)!==!1){for(l=e.event.handlers.call(this,d,c),n=0;(a=l[n++])&&!d.isPropagationStopped();)for(d.currentTarget=a.elem,i=0;(s=a.handlers[i++])&&!d.isImmediatePropagationStopped();)d.rnamespace&&!d.rnamespace.test(s.namespace)||(d.handleObj=s,d.data=s.data,r=((e.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,u),void 0!==r&&(d.result=r)===!1&&(d.preventDefault(),d.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,d),d.result}},handlers:function(t,n){var i,r,o,a,s=[],l=n.delegateCount,d=t.target;if(l&&d.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&(d.disabled!==!0||"click"!==t.type)){for(r=[],i=0;l>i;i++)a=n[i],o=a.selector+" ",void 0===r[o]&&(r[o]=a.needsContext?e(o,this).index(d)>-1:e.find(o,this,null,[d]).length),r[o]&&r.push(a);r.length&&s.push({elem:d,handlers:r})}return l<n.length&&s.push({elem:this,handlers:n.slice(l)}),s},addProp:function(t,n){Object.defineProperty(e.Event.prototype,t,{enumerable:!0,configurable:!0,get:e.isFunction(n)?function(){return this.originalEvent?n(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[t]:void 0},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[e.expando]?t:new e.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){return this instanceof e.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?a:s,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),void(this[e.expando]=!0)):new e.Event(t,n)},e.Event.prototype={constructor:e.Event,isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=a,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&u.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&c.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},e.event.addProp),e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=this,o=t.relatedTarget,a=t.handleObj;return o&&(o===r||e.contains(r,o))||(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=n),i}}}),e.fn.extend({on:function(e,t,n,i){return d(this,e,t,n,i)},one:function(e,t,n,i){return d(this,e,t,n,i,1)},off:function(t,n,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,e(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return n!==!1&&"function"!=typeof n||(i=n,n=void 0),i===!1&&(i=s),this.each(function(){e.event.remove(this,t,i,n)})}}),e});