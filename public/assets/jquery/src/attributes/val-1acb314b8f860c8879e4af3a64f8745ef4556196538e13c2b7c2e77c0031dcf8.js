define(["../core","./support","../core/init"],function(e,t){"use strict";var n=/\r/g,o=/[\x20\t\r\n\f]+/g;e.fn.extend({val:function(t){var o,r,i,a=this[0];{if(arguments.length)return i=e.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,e(this).val()):t,null==r?r="":"number"==typeof r?r+="":e.isArray(r)&&(r=e.map(r,function(e){return null==e?"":e+""})),o=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()],o&&"set"in o&&void 0!==o.set(this,r,"value")||(this.value=r))});if(a)return o=e.valHooks[a.type]||e.valHooks[a.nodeName.toLowerCase()],o&&"get"in o&&void 0!==(r=o.get(a,"value"))?r:(r=a.value,"string"==typeof r?r.replace(n,""):null==r?"":r)}}}),e.extend({valHooks:{option:{get:function(t){var n=e.find.attr(t,"value");return null!=n?n:e.trim(e.text(t)).replace(o," ")}},select:{get:function(t){for(var n,o,r=t.options,i=t.selectedIndex,a="select-one"===t.type,l=a?null:[],s=a?i+1:r.length,u=0>i?s:a?i:0;s>u;u++)if(o=r[u],(o.selected||u===i)&&!o.disabled&&(!o.parentNode.disabled||!e.nodeName(o.parentNode,"optgroup"))){if(n=e(o).val(),a)return n;l.push(n)}return l},set:function(t,n){for(var o,r,i=t.options,a=e.makeArray(n),l=i.length;l--;)r=i[l],(r.selected=e.inArray(e.valHooks.option.get(r),a)>-1)&&(o=!0);return o||(t.selectedIndex=-1),a}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){return e.isArray(n)?t.checked=e.inArray(e(t).val(),n)>-1:void 0}},t.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});